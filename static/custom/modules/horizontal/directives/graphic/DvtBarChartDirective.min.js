define(function(require){"use strict";function nextId(){return sequence++}function DvtBarChartDirective(dataService,plotsProvider,exportService,$log,maximize,$cookies,dvtUtils){var _template='<div class="card--block--chart--wrapper"><ul class="chart--submenu" ng-if="!isMaximized"><li><a data-ng-click="open(items[0].action)" class="{{items[0].class}}" title="{{items[0].text}}" role="button"><label class="sr-only" data-ng-bind="items[0].text"></label></a></li><li class="dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"><a href=""><label class="sr-only">Download</label></a></li><ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu1"><li><a data-ng-click="open(items[2].action)" role="button" data-ng-bind="items[2].text"></a></li><li><a data-ng-click="open(items[1].action)" role="button" data-ng-bind="items[1].text"></a></li></ul></ul><h2 ng-if="(!!chartTitle && !isMaximized && !titleH3) || (isMaximized && !longTitle)" data-ng-bind-html="chartTitle" class="title--card ng-binding">Company size</h2><h2 ng-if="!!isMaximized && !!longTitle" data-ng-bind-html="longTitle" class="title--card ng-binding" >Company size</h2><h2 data-ng-if="(!!chartTitle && !isMaximized && titleH3)" class="title--card ng-binding" data-ng-bind-html="chartTitle"></h2><div data-ng-if="haveEnlarge" class="pull-right contextual-menu enlarge-button cursor-pointer"><button data-ng-click="open(items[0].action)" title="Compare with other groups">Compare groups</button></div>';return _template+='<div data-ng-if="!isMaximized && haveEnlarge" class="pull-right contextual-menu cursor-pointer maximizeImage">',_template+='<img alt="Maximize graphic" data-ng-click="open(items[1].action)" title="Maximize graphic" src="/pentaho/plugin/pentaho-cdf-dd/api/resources/system/osha-dvt-barometer/static/custom/img/more.png"/>',_template+='<div class="dropdown" ng-if="!isEnlarge==true"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"><i class="three-points-vertical" alt="Export" title="Export"></i></button><ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu1"><li data-ng-repeat="item in items"><a data-ng-click="open(item.action)" role="button" data-ng-bind="item.text"></a></li></ul></div>',_template+='</div><div data-ng-if="isMaximized && isEnlarged==undefined && isZoom" class="pull-right contextual-menu export-button-modal">',navigator.userAgent.match("iPad")||(_template+='<div class="dropdown" ng-if="!isEnlarge==true"><a data-ng-click="open(\'exportImageLink\')" role="button"><i class="fa fa-arrow-down" aria-hidden="true"></i><i class="fa fa-picture-o" aria-hidden="true"></i> Export as Image</a></div>'),_template+='</div><div class="chart--wrapper"><div data-ng-attr-id="{{ id }}"></div><div class="legend-text-block"><div ng-if="isMaximized && query != gauss" class="logoGraphics-wrapper"><span>{{datasources[0].datasource}}, </span><span>{{datasources[0].date_from}} </span> <span ng-if="datasources[0].date_to != null">/ {{datasources[0].date_to}}</span><img alt="European Agency for Safety and Health at Work" src="/pentaho/plugin/pentaho-cdf-dd/api/resources/system/osha-dvt-barometer/static/custom/img/EU-OSHA-en.png" class="logoGraphics"></div><div class="legend-info" ng-if="isMaximized && legendClickMode && legend">Click on each value on the legend to hide/show in on the chart</div></div></div>',{restrict:"E",require:["^dvtDashboard"],replace:!0,scope:{listenTo:"=",params:"=",postFetch:"=",postExecution:"=",clickAction:"=",labelTop:"=",baseAxisLabelText:"=",baseAxisLabelLongText:"=",baseAxisLabelVisible:"=",labelVisible:"=",labelTextAlign:"=",colors:"=",calculations:"=",plots:"=",readers:"=",dimensions:"=",visualRoles:"=",barFillStyle:"=",color2AxisColors:"=",contextuals:"=?",maxLabelTop:"=",enlargeAction:"=",axisColor:"=",datasourceAndDates:"="},template:_template,link:function(scope,element,attributes,controllers){var resolution=screen.width;$(window).on("resize",function(e){resolution=screen.width}),attributes.id.split("_").length>1&&(attributes.id=attributes.id.split("_")[1]),scope.id="dvt_bar_chart_"+nextId();var dashboard=controllers[0];scope.divClass=attributes.cssClass||"col-xs-12 col-sm-6 col-md-3 col-lg-2",scope.enlargeAction&&(scope.haveEnlarge="true"),scope.i18n=i18n,scope.isMaximized=!!attributes.isMaximized,scope.isZoom=!!attributes.isZoom,scope.titleH3=!!attributes.titleH3,scope.chartTitle=attributes.chartTitle,scope.longTitle=attributes.longTitle,scope.isEnlarge=attributes.isEnlarged,"toggleVisible"==attributes.legendClickMode&&(scope.legendClickMode=!0),"true"===attributes.legend?scope.legend=!0:scope.legend=!1,scope.query=attributes.query,scope.gauss="getGaussChartValues",scope.datasources=[];var definition={type:"cccBarChart",name:scope.id,executeAtStart:!0,priority:attributes.priority||5,htmlObject:scope.id,listeners:[],parameters:[],chartDefinition:{dataAccessId:attributes.query||null,path:attributes.cda||"osha-dvt-barometer/dashboards/barometerdash.cda",width:attributes.width||300,height:attributes.height||250,orientation:attributes.orientation||"vertical",crosstabMode:!1,stacked:1==attributes.stacked||!1,axisLabel_font:attributes.axisLabelFont||'14px "OpenSans-bold"',axisTitleLabel_font:attributes.axisTitleLabelFont||'14px "OpenSans-bold" gray',axisTitleLabel_textStyle:"gray",axisFixedMax:attributes.axisFixedMax||100,axisFixedMin:attributes.axisFixedMin||0,axisTicks:attributes.axisTicks||!1,axisRule_strokeStyle:attributes.axisRule_strokeStyle||"",baseAxisOffset:attributes.baseAxisOffset||0,clickable:"false"!==attributes.clickable,clickAction:function(dataset){},colorRole:"category",colors:[],colorMap:{},color2AxisTransform:function(c){return c.brighter(0)},animate:attributes.animate||!1,selectable:attributes.selectable||!1,hoverable:"false"!=attributes.hoverable,tooltipEnabled:"false"!==attributes.tooltipEnabled,tooltipClassName:"light",tooltipOpacity:.8,orthoAxisVisible:"false"!==attributes.orthoAxisVisible,ortho2AxisVisible:!0,baseAxisVisible:!0,plotFrameVisible:!1,overflowMarkersVisible:!1,underflowMarkersVisible:!1,plotBg_fillStyle:plotsProvider.getPlotBgColor(),baseAxisBandSizeRatio:attributes.baseAxisBandSizeRatio||.9,baseAxisGrid:attributes.baseAxisGrid||!1,baseAxisPosition:attributes.baseAxisPosition||"bottom",orthoAxisGrid:"false"!==attributes.orthoAxisGrid,axisGrid_strokeStyle:"white",axisGrid_lineWidth:2,axisBandSizeRatio:1,valuesVisible:"true"===attributes.valuesVisible,valuesOverflow:attributes.valuesOverflow||"",valuesMask:attributes.valuesMask||"{series}",valuesFont:attributes.valuesFont||'emphasis 10px "OpenSans"',valuesAnchor:attributes.valuesAnchor||void 0,valuesOptimizeLegibility:!0,valuesNormalized:1==attributes.valuesNormalized||!1,valuesFormat:scope.valuesFormat,label_top:scope.labelTop,legend:"true"===attributes.legend,legendClickMode:attributes.legendClickMode||"toggleVisible",legendFont:attributes.legendFont||'normal 12px "OpenSans"',legendPosition:attributes.legendPos||"bottom",legendLabel_visible:!0,legendDot_strokeStyle:attributes.legendDotStrokeStyle,legendShape:"square",legendSize:attributes.legendSize,legendAlign:attributes.legendAlign||"center",legendOverflow:attributes.legendOverflow||"clip",legendItemSize:attributes.legendItemSize,color2AxisLegendShape:attributes.color2AxisLegendShape||"square",baseAxisLabel_text:scope.isMaximized?scope.baseAxisLabelLongText:scope.baseAxisLabelText,baseAxisLabel_visible:scope.baseAxisLabelVisible,baseAxisLabel_textBaseline:attributes.baseAxisLabelTextBaseline||"middle",baseAxisLabel_textAlign:attributes.baseAxisLabelTextBaseline||"center",xAxisLabel_textAlign:"left",baseAxisLabel_textStyle:attributes.baseAxisLabelTextStyle||"gray",baseAxisOverlappedLabelsMode:"leave",multiChartRole:attributes.multiChart,label_textAlign:scope.labelTextAlign||"center",labelTextMargin:attributes.labelTextMargin||0,tooltipGravity:"sw",tooltipFormat:scope.tooltipFormat,baseAxisTooltipEnabled:!0,baseAxisLabelSpacingMin:1,orthoAxisTitle:attributes.orthoAxisTitle||"",multipleLabelColors:"true"===attributes.multipleLabelColors||!1,showEuroMask:"true"===attributes.showEuroMask,leafContentOverflow:attributes.leafContentOverflow||"auto",base_fillStyle:"#f0f0f0",xAxis_fillStyle:"#f0f0f0",panel_fillStyle:attributes.panelColor||"",axisLabelWordBreak:attributes.axisLabelWordBreak||0,customTooltip:attributes.customTooltip||0,datasourceAndDates:scope.datasourceAndDates||[]}};if(attributes.customLabel&&(definition.chartDefinition.baseAxisLabel_text=function(scene){var country=scene.firstAtoms.category.label,pCountry1=definition.parameters[1]?definition.parameters[1][1]:null,pCountry2=definition.parameters[2]?definition.parameters[2][1]:null;return country.match(pCountry1)?pCountry1:country.match(pCountry2)&&"0"!=pCountry2?pCountry2:void 0}),attributes.legendFillStyle&&(definition.chartDefinition.legendDot_fillStyle=function(scene){var country=scene.firstAtoms.category.label,pCountry1=definition.parameters[1]?definition.parameters[1][1]:null,pCountry2=definition.parameters[2]?definition.parameters[2][1]:null;return"EU28"==country?dvtUtils.getEUColor():country.match(pCountry1)?dvtUtils.getColorCountry(1):country.match(pCountry2)?dvtUtils.getColorCountry(2):void 0}),scope.datasourceAndDates){var datasource=scope.datasourceAndDates[0],indicator=scope.datasourceAndDates[1];dataService.getDatasourceAndDates(datasource,indicator).then(function(data){data.data.resultset.map(function(elem){scope.datasources.push({datasource:elem[0],date_from:elem[1],date_to:elem[2]})})}).catch(function(err){throw err})}if("1"==definition.chartDefinition.customTooltip&&(definition.chartDefinition.tooltipFormat=function(scene){var atoms=scene.firstAtoms,key=atoms.category.key,dimension=scene.firstAtoms.category.dimension.type.label;return void 0!=i18n["L"+key]&&(key=i18n["L"+key]),'<div class="ccc-tt"><table class="ccc-tt-ds ccc-tt-plot ccc-tt-plot-bar ccc-tt-chartOrient-v" data-ccc-color="rgb(68,159,162)"><tbody><tr class="ccc-tt-dim ccc-tt-dimValueType-Any ccc-tt-dimDiscrete"><td class="ccc-tt-dimLabel"><span>'+dimension+'</span></td><td class="ccc-tt-dimRoles"><span class="ccc-tt-role ccc-tt-role-color"><span class="ccc-tt-roleIcon"></span><span class="ccc-tt-roleLabel">Color</span></span><span class="ccc-tt-role ccc-tt-role-series"><span class="ccc-tt-roleIcon"></span><span class="ccc-tt-roleLabel">Series</span></span></td><td class="ccc-tt-dimValue"><span class="ccc-tt-value">'+key+'</span></td></tr><tr class="ccc-tt-dim ccc-tt-dimValueType-Any ccc-tt-dimDiscrete"><td class="ccc-tt-dimLabel"><span>Country</span></td><td class="ccc-tt-dimRoles"><span class="ccc-tt-role ccc-tt-role-category"><span class="ccc-tt-roleIcon"></span><span class="ccc-tt-roleLabel">Category</span></span></td><td class="ccc-tt-dimValue"><span class="ccc-tt-value">'+atoms.series.key+'</span></td></tr><tr class="ccc-tt-dim ccc-tt-dimValueType-Number ccc-tt-dimContinuous"><td class="ccc-tt-dimLabel"><span>Value</span></td><td class="ccc-tt-dimRoles"><span class="ccc-tt-role ccc-tt-role-value"><span class="ccc-tt-roleIcon"></span><span class="ccc-tt-roleLabel">Value</span></span></td><td class="ccc-tt-dimValue"><span class="ccc-tt-value">'+atoms.value.label+"</span></td></tr></tbody></table></div>"}),"1"==definition.chartDefinition.axisLabelWordBreak&&(definition.chartDefinition.baseAxisTooltipFormat=function(scene){var atoms=scene.firstAtoms,key=atoms.category.key;if(void 0!=i18n["L"+key]&&(key=i18n["L"+key]),key.length>25)return key},definition.chartDefinition.baseAxisLabel_call=function(){this.sign.panel,this.sign.chart.axes.x.ticks;this.add(pv.Label).textMargin(15).text(function(scene){var value=scene.firstAtoms.category.value;if(scope.fullText=scene.firstAtoms.category.label,void 0!=i18n["L"+value]&&(value=i18n["L"+value],scene.firstAtoms.category.label=value,scope.fullText=value),scope.fullText.length>21){var separator=scope.fullText.indexOf(" ",7);if(scene.firstAtoms.category.label=scope.fullText.substring(0,separator),scope.substring=scope.fullText.substring(separator+1),scope.substring.length<=12)return scope.substring;scope.substring.indexOf(" ",7);return scope.substring2=scope.substring.substring(0,12),scope.substring2+"..."}if(scope.fullText==value)return" ";var index=value.indexOf(" ",7),x=value.substring(index+1);return value.substring(index+1).length<=15?value.substring(index+1):x.substring(0,10)+"..."})}),"getCompanySizeData"==definition.chartDefinition.dataAccessId&&(resolution<=425&&resolution>325&&(definition.chartDefinition.legendItemSize=250),resolution<=325&&(definition.chartDefinition.legendItemSize=200)),"getEmploymentPerSectorData"==definition.chartDefinition.dataAccessId&&(resolution<=425&&(definition.chartDefinition.legendItemSize=250),resolution<=325&&(definition.chartDefinition.legendItemSize=200)),"getNonFatalAccidentsPerWorkersData"==definition.chartDefinition.dataAccessId&&resolution<=425&&(definition.chartDefinition.legendItemSize=120),scope.axisColor&&(definition.chartDefinition.xAxis_fillStyle="transparent",definition.chartDefinition.xAxis_call=function(){this.add(pv.Image).url("/pentaho/plugin/pentaho-cdf-dd/api/resources/system/osha-dvt-barometer/static/custom/img/color-range.png").left(function(scene){var panelWidth=this.root.width();if(200!=panelWidth)return panelWidth/13}).right(function(scene){return this.root.width()/13})}),attributes.showEuroMask&&(definition.chartDefinition.yAxisLabel_text=function(){return this.scene.vars.tick.label+" €"}),scope.baseAxisLabelText&&(definition.chartDefinition.baseAxisLabel_text=scope.baseAxisLabelText),scope.baseAxisLabelVisible&&(definition.chartDefinition.baseAxisLabel_visible=scope.baseAxisLabelVisible),scope.readers&&(definition.chartDefinition.readers=scope.readers),scope.dimensions&&(definition.chartDefinition.dimensions=scope.dimensions),scope.calculations&&(definition.chartDefinition.calculations=scope.calculations),scope.plots&&(definition.chartDefinition.plots=scope.plots),scope.params&&(definition.parameters=scope.params),scope.listenTo)for(var listen in scope.listenTo)definition.listeners[listen]=scope.listenTo[listen];scope.clickAction&&(definition.chartDefinition.clickAction=scope.clickAction),scope.colors&&(definition.chartDefinition.colors=scope.colors),scope.color2AxisColors&&(definition.chartDefinition.color2AxisColors=scope.color2AxisColors),"vertical"==definition.chartDefinition.orientation?definition.chartDefinition.baseAxisLabel_textAlign=attributes.baseAxisLabelTextAlign||"center":"horizontal"==definition.chartDefinition.orientation&&(definition.chartDefinition.baseAxisLabel_textAlign=attributes.baseAxisLabelTextAlign||"right"),attributes.angle&&(definition.chartDefinition.baseAxisLabel_textAngle=1==attributes.angle?-Math.PI/3:-Math.PI/6.5,"horizontal"==definition.chartDefinition.orientation||0==attributes.angle?(definition.chartDefinition.baseAxisLabel_textAngle=0,definition.chartDefinition.baseAxisLabel_textBaseline="middle"):(definition.chartDefinition.baseAxisLabel_textAlign="right",definition.chartDefinition.baseAxisLabel_textBaseline="top"),attributes.angle>1&&(definition.chartDefinition.margins=scope.isMaximized?"1 1 -5 1":"1 1 -30 1",definition.chartDefinition.paddings=scope.isMaximized?"1 1 0 -27":"1 1 0 -25")),attributes.margins?definition.chartDefinition.margins=attributes.margins:definition.chartDefinition.margins="0",attributes.paddings?definition.chartDefinition.paddings=attributes.paddings:definition.chartDefinition.paddings="7 5 0 10",attributes.baseAxisSize?definition.chartDefinition.baseAxisSize=attributes.baseAxisSize:definition.chartDefinition.baseAxisSize=40,scope.postFetch&&(definition.postFetch=scope.postFetch);var postExec_=scope.postExecution;if(definition.postExecution=function(){postExec_&&postExec_();var fullwitdh=this.placeholder().width();this.chart.options.width=fullwitdh,this.chart.render(!0,!0,!1)},scope.dimensions&&(definition.chartDefinition.dimensions=scope.dimensions),scope.visualRoles&&(definition.chartDefinition.visualRoles=scope.visualRoles),attributes.pXLabels&&(definition.chartDefinition.xAxisLabel_visible=0!=attributes.pXLabels),attributes.pYLabels&&(definition.chartDefinition.yAxisLabel_visible=0!=attributes.pYLabels),attributes.colorRole)switch(attributes.colorRole){case"s":definition.chartDefinition.colorRole="series";break;case"c":definition.chartDefinition.colorRole="category";break;default:definition.chartDefinition.colorRole=attributes.colorRole}if(attributes.axisPercent&&"1"==attributes.axisPercent&&("vertical"==definition.chartDefinition.orientation?definition.chartDefinition.orthoAxisLabel_text=plotsProvider.setAxisXPercentFormat:definition.chartDefinition.orthoAxisLabel_text=plotsProvider.setAxisYPercentFormat),attributes.axisPercent2&&(definition.chartDefinition.ortho2AxisLabel_text=plotsProvider.setAxisYPercentFormat),scope.valuesVisible&&(definition.chartDefinition.valuesVisible=!!attributes.valuesVisible),attributes.valuesOverflow&&(definition.chartDefinition.valuesOverflow=attributes.valuesOverflow),attributes.valuesMask&&(definition.chartDefinition.valuesMask=attributes.valuesMask),definition.chartDefinition.format={number:"0.00"},(scope.isMaximized&&"pie"==attributes.type||"pie"==attributes.type)&&(definition.chartDefinition.valuesVisible=!0,definition.chartDefinition.valuesAnchor="center",definition.chartDefinition.valuesLabelStyle="inside",scope.isMaximized?definition.chartDefinition.valuesFont="20px sans-serif":definition.chartDefinition.valuesFont="14px sans-serif",definition.chartDefinition.format={percent:"#%"},definition.chartDefinition.dimensions={value:{format:{number:"#.00",percent:"#%"}}},definition.chartDefinition.valuesOverflow="trim",definition.chartDefinition.label_textStyle="black",scope.isMaximized?definition.chartDefinition.valuesMask="{value}%":definition.chartDefinition.valuesMask="{value.percent}",definition.chartDefinition.label_textAngle=0),attributes.legendDotFillStyle&&(definition.chartDefinition.legendDot_fillStyle=attributes.legendDotFillStyle,definition.chartDefinition.legendDot_strokeStyle=attributes.legendDotFillStyle),attributes.multiChart&&(definition.chartDefinition.multiChartRole=attributes.multiChart),attributes.orthoAxisVisible?definition.chartDefinition.orthoAxisVisible=!1:definition.chartDefinition.orthoAxisVisible=!0,attributes.orthoAxisTitle&&(scope.isMaximized||attributes.orthoAxisTitleVisible)&&(definition.chartDefinition.orthoAxisTitle=attributes.orthoAxisTitle),attributes.axisFixedMin?definition.chartDefinition.orthoAxisFixedMin=attributes.axisFixedMin:definition.chartDefinition.orthoAxisFixedMin=0,attributes.axisFixedMax&&(definition.chartDefinition.orthoAxisFixedMax=attributes.axisFixedMax),attributes.axis2FixedMin&&(definition.chartDefinition.ortho2AxisFixedMin=attributes.axis2FixedMin),attributes.axis2FixedMax&&(definition.chartDefinition.ortho2AxisFixedMax=attributes.axis2FixedMax),attributes.step)definition.chartDefinition.orthoAxisTickUnit=attributes.step;else if(attributes.axisPercent){var diff=(definition.chartDefinition.orthoAxisFixedMax||100)-(definition.chartDefinition.orthoAxisFixedMin||0),stepVal=25;diff<20?stepVal=5:diff<50?stepVal=10:diff<75&&(stepVal=25),definition.chartDefinition.orthoAxisTickUnit=stepVal}if(attributes.ortho2AxisTitle&&(definition.chartDefinition.ortho2AxisTitle=attributes.ortho2AxisTitle),scope.barFillStyle&&(definition.chartDefinition.bar_fillStyle=scope.barFillStyle),scope.labelVisible&&(definition.chartDefinition.label_visible=scope.labelVisible),scope.labelTop&&(definition.chartDefinition.label_top=scope.labelTop),attributes.multipleLabelColors){var pCountry1=definition.parameters[1]?definition.parameters[1][1]:null,pCountry2=definition.parameters[2]?definition.parameters[2][1]:null;"getGaussChartValues"==definition.chartDefinition.dataAccessId?definition.chartDefinition.baseAxisLabel_textStyle="black":"false"==attributes.multipleLabelColors?definition.chartDefinition.baseAxisLabel_textStyle="gray":definition.chartDefinition.baseAxisLabel_textStyle=function(){return"EU28"==this.scene.vars.tick.label?dvtUtils.getEUColor():this.scene.vars.tick.label.match(pCountry1)?dvtUtils.getColorCountry(1):this.scene.vars.tick.label.match(pCountry2)?dvtUtils.getColorCountry(2):"gray"}}else definition.chartDefinition.baseAxisLabel_textStyle="gray";var chart;if(attributes.type)switch(attributes.type){case"dot":chart=new DotChartComponent(definition);break;case"lines":chart=new LineChartComponent(definition);break;case"pie":chart=new PieChartComponent(definition);break;default:chart=new BarChartComponent(definition)}else chart=new BarChartComponent(definition);if(dashboard.register(chart),!scope.contextuals||scope.contextuals.length>0){scope.contextuals||(scope.contextuals=[]),attributes.isMaximized||scope.contextuals.push(["Maximize","maximize","maximize-button"]);window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv:11\./)||navigator.userAgent.match(/Edge/)||"getGDPData"==definition.chartDefinition.dataAccessId?[["Download raw data","exportData","download-button"]].forEach(function(item){scope.contextuals.push(item)}):(configService.isMobile(),[["Download raw data","exportData","download-button"]].forEach(function(item){scope.contextuals.push(item)}),[["Export as image","exportImage","download-button"]].forEach(function(item){scope.contextuals.push(item)}))}scope.showContextuals=scope.contextuals&&scope.contextuals.length>0||!1,scope.showContextuals&&(scope.items=[],scope.contextuals.forEach(function(item){scope.items.push({text:item[0],action:item[1],class:item[2]})}));scope.isMaximized||function(){definition.maxType=attributes.type,definition.id=attributes.id,attributes.id&&(definition.title=attributes.title),definition.chartType=attributes.type,definition.angle=attributes.angle,definition.promise=scope.promise,definition.valuesVisible=attributes.valuesVisible,definition.maxLegendPos=attributes.maxLegendPos,definition.legend=attributes.legend,definition.maxLabelTop=scope.maxLabelTop,definition.maxAxisPercent=attributes.axisPercent,definition.maxAxisPercent2=attributes.axisPercent2,definition.longTitle=attributes.longTitle,definition.baseAxisLabelLongText=scope.baseAxisLabelLongText,definition.orthoAxisTitle=attributes.orthoAxisTitle,definition.chartTitle=attributes.chartTitle,definition.valuesOverflow=attributes.valuesOverflow,definition.valuesMask=attributes.valuesMask,definition.labelTextAlign=scope.labelTextAlign,definition.labelTextMargin=attributes.labelTextMargin,definition.showEuroMask=attributes.showEuroMask,definition.hoverable=attributes.hoverable,definition.orthoAxisVisible=attributes.orthoAxisVisible,definition.baseAxisSize=attributes.baseAxisSize,definition.customLabel=attributes.customLabel,attributes.maxFunctionalLegend&&(definition.maxFunctionalLegend=attributes.maxFunctionalLegend),void 0===attributes.disableMaxLegend?definition.legendClickMode="toggleVisible":definition.legendClickMode="none"}();var dvtModal=maximize.setModal(definition);if(scope.open=function(action){switch(action){case"enlarge":var scrollTop=$(window).scrollTop();$cookies.remove("scrollTop"),$cookies.put("scrollTop",scrollTop),scope.enlargeAction();break;case"retirementAge":case"HLYvsLE":break;case"maximize":maximize.doMaximize(dvtModal,definition,"maximize","MaximizeController",!1);break;case"exportImage":maximize.doMaximize(dvtModal,definition,"maximize","MaximizeController",!0);break;case"exportImageLink":exportService.exportImageAction(scope);break;case"exportData":exportService.exportDataAction(scope,dashboard)}},attributes.id){definition.chartDefinition.title=null;JSON.parse("["+attributes.id.replace("chart-","")+"]");plotsProvider.showContextualData("",definition,scope,attributes)}}}}var DotChartComponent=require("cdf/components/CccDotChartComponent"),LineChartComponent=require("cdf/components/CccLineChartComponent"),BarChartComponent=require("cdf/components/CccBarChartComponent"),PieChartComponent=require("cdf/components/CccPieChartComponent"),configService=require("horizontal/config/configService"),pv=require("cdf/lib/CCC/protovis"),i18n=configService.getLiterals(),sequence=1;return DvtBarChartDirective.$inject=["dataService","plotsProvider","exportService","$log","maximize","$cookies","dvtUtils"],DvtBarChartDirective});