define(function(require){"use strict";function nextId(){return sequence++}function DvtRadarDirective($q,$log,dvtUtils,plotsProvider,exportService,dataService,maximize){var ua=window.navigator.userAgent,_template=(ua.indexOf("MSIE "),'<div class="card--block--chart--wrapper"><ul class="chart--submenu" ng-if="!isMaximized"><li><a data-ng-click="open(items[0].action)" class="{{items[0].class}}" title="{{items[0].text}}" role="button"><label class="sr-only" data-ng-bind="items[0].text"></label></a></li><li class="dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"><a href=""><label class="sr-only">Download</label></a></li><ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu1"><li><a data-ng-click="open(items[1].action)" role="button">Export data</a></li></ul></ul><h2 ng-if="(!!chartTitle && !isMaximized && !titleH3) || (isMaximized && !longTitle)" data-ng-bind-html="chartTitle" class="title--card ng-binding">Company size</h2><h2 ng-if="!!isMaximized && !!longTitle" data-ng-bind-html="longTitle" class="title--card ng-binding" >Company size</h2><h2 data-ng-if="(!!chartTitle && !isMaximized && titleH3)" class="title--card ng-binding" data-ng-bind-html="chartTitle"></h2><div data-ng-if="haveEnlarge" class="pull-right contextual-menu enlarge-button cursor-pointer"><button data-ng-click="open(items[0].action)" title="Compare with other groups">Compare groups</button></div>');return _template+='<div data-ng-if="!isMaximized && haveEnlarge" class="pull-right contextual-menu cursor-pointer maximizeImage">',_template+='<img alt="Maximize graphic" data-ng-click="open(items[1].action)" title="Maximize graphic" src="/pentaho/plugin/pentaho-cdf-dd/api/resources/system/osha-dvt-barometer/static/custom/img/more.png"/>',_template+='<div class="dropdown" ng-if="!isEnlarge==true"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"><i class="three-points-vertical" alt="Export" title="Export"></i></button><ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu1"><li data-ng-repeat="item in items"><a data-ng-click="open(item.action)" role="button" data-ng-bind="item.text"></a></li></ul></div>',_template+='</div><div data-ng-if="isMaximized && isEnlarged==undefined && isZoom" class="pull-right contextual-menu export-button-modal">',navigator.userAgent.match("iPad")||(_template+='<div class="dropdown" ng-if="!isEnlarge==true"><a data-ng-click="open(\'exportImageLink\')" role="button"><i class="fa fa-arrow-down" aria-hidden="true"></i><i class="fa fa-picture-o" aria-hidden="true"></i> Export as Image</a></div>'),_template+='</div><div class="chart--wrapper"><div data-ng-attr-id="{{ id }}"></div><div class="legend-text-block"><div ng-if="isMaximized" class="logoGraphics-wrapper"><span>{{datasources[0].datasource}}, </span><span>{{datasources[0].date_from}} </span> <span ng-if="datasources[0].date_to != null">/ {{datasources[0].date_to}}</span><img alt="European Agency for Safety and Health at Work" src="/pentaho/plugin/pentaho-cdf-dd/api/resources/system/osha-dvt-barometer/static/custom/img/EU-OSHA-en.png" class="logoGraphics"></div></div></div>',{restrict:"E",require:["^dvtDashboard"],priority:-1,scope:{promises:"=",country1:"=",country2:"=",contextuals:"=?",listenTo:"=",params:"=",clickAction:"=",datasourceAndDates:"="},transclude:!0,template:_template,link:function(scope,element,attributes,controllers){attributes.id.split("_").length>1&&(attributes.id=attributes.id.split("_")[1]),scope.id="dvt_radarChart"+nextId(),scope.divClass=attributes.cssClass,scope.isMaximized=!!attributes.isMaximized,scope.longTitle=attributes.longTitle,scope.chartTitle=attributes.chartTitle,scope.isHistorical=attributes.historical,scope.isZoom=!!attributes.isZoom,scope.isEnlarge=attributes.isEnlarged,scope.datasources=[];var dashboard=controllers[0],country1=scope.country1,country2=scope.country2,color1=dvtUtils.getColorCountry(1),lightColor1=dvtUtils.getColorCountry(12),color2=dvtUtils.getColorCountry(2),lightColor2=dvtUtils.getColorCountry(22),colorEU=dvtUtils.getEUColor(),lightColorEU=dvtUtils.getEUColor(2),definition={type:"raphaelComponent",name:scope.id,priority:attributes.priority||5,parameters:[],executeAtStart:!0,width:attributes.width||1e3,height:attributes.height||600,htmlObject:scope.id,listeners:[],datasourceAndDates:scope.datasourceAndDates||[],customfunction:function(){function Radar(paper,cx,cy,r,values,secondIndicatorValues,thirdIndicatorValues,opts){if(!values||0==values.length)throw"Values array is required";opts=opts||{};var $r=Raphael,angle=360/values.length,defaultOpts={meshSize:250,labels:[],labelFontSize:12,labelColor:"black",valueFontSize:13,drawLabels:!0,drawValues:!0,armFill:"none",armStroke:"rgba(255, 106, 0, .5)",armStrokeWidth:1,drawArms:!0,meshFill:"none",meshStroke:"rgba(120, 120, 120, .5)",meshStrokeWidth:1,drawMesh:!0,max:Math.max.apply(Math,values),pathFill:"none",pathStroke:"#0026ff",pathStrokeWidth:3,pathCircleOuterRadius:4,pathCircleInnerRadius:2,pathCircleStroke:"none",drawPathCircles:!0,closePath:!0,indicators:["indicator1","indicator2","indicator3"]};for(var prop in opts)defaultOpts[prop]=opts[prop];opts=defaultOpts;var clicked=scope.clickAction,path=function(cx,cy,r,startAngle,values,max,theme){for(var pathData=[],i=0,l=values.length;i<l;){var rad=$r.rad(startAngle+360/values.length*i);pathData.push(0==i?"M":"L"),pathData.push(cx+r/max*values[i]*Math.cos(rad)),pathData.push(cy+r/max*values[i]*Math.sin(rad)),++i}opts.closePath&&pathData.push("Z"),theme?paper.path(pathData.join(",")).attr({stroke:theme.pathStroke,fill:theme.pathFill,"stroke-width":theme.pathStrokeWidth,"stroke-linejoin":"round"}):paper.path(pathData.join(",")).attr({stroke:opts.pathStroke,fill:opts.pathFill,"stroke-width":opts.pathStrokeWidth,"stroke-linejoin":"round"})},over=function(e){this.animate({opacity:.5},100);var elementSVG=angular.element("body");angular.element(elementSVG).append('<div class="dvt-map-tooltip"></div>'),angular.element(".dvt-map-tooltip").append('<p class="country-name"><ul><li class="data1"></li><li class="data2"></li><li class="data3"></li></ul></p>');var question=this.attrs.title.substring(0,this.attrs.title.indexOf("-")-1),dataIndex=(this.attrs.title.substring(this.attrs.title.indexOf("-")+1,this.attrs.title.indexOf(":")),this.attrs.title.substring(this.attrs.title.indexOf(":")+1),opts.labels.indexOf(question));angular.element(".dvt-map-tooltip .country-name").text(opts.titles[dataIndex]),angular.element(".dvt-map-tooltip .data1").html("<label>"+opts.indicators[0]+": "+values[dataIndex]+" %</label>"),secondIndicatorValues.length>0?(angular.element(".dvt-map-tooltip .data2").html("<label>"+opts.indicators[1]+": "+secondIndicatorValues[dataIndex]+" %</label>"),angular.element(".dvt-map-tooltip .data3").html("<label>"+opts.indicators[2]+": "+thirdIndicatorValues[dataIndex]+" %</label>")):angular.element(".dvt-map-tooltip .data3").html("<label>"+opts.indicators[1]+": "+thirdIndicatorValues[dataIndex]+" %</label>");var widthTooltip=angular.element(".dvt-map-tooltip").width(),heightTooltip=angular.element(".dvt-map-tooltip").height(),positionSVG=elementSVG.position().top+elementSVG.height()/2;angular.element(document).on("mousemove",function(event){event.pageY<positionSVG?(angular.element(".dvt-map-tooltip").removeClass("top"),angular.element(".dvt-map-tooltip").addClass("botton"),angular.element(".dvt-map-tooltip").css({left:event.pageX-widthTooltip/2-25,top:event.pageY+30})):(angular.element(".dvt-map-tooltip").removeClass("botton"),angular.element(".dvt-map-tooltip").addClass("top"),angular.element(".dvt-map-tooltip").css({left:event.pageX-widthTooltip/2-25,top:event.pageY-heightTooltip-70}))})},out=function(){this.animate({opacity:1},100),angular.element(".dvt-map-tooltip").remove()},circle=function(cx,cy,r,angle,value,max,title,indicator,theme){var colorStroke=title==country1&&"EU"!=country1?theme?lightColor1:color1:title==country2&&"EU"!=country2?theme?lightColor2:color2:"EU"==title?theme?lightColorEU:colorEU:theme?theme.pathCircleStroke||opts.pathCircleStroke:opts.pathCircleStroke,rad=$r.rad(angle),p={x:cx+r/max*value*Math.cos(rad),y:cy+r/max*value*Math.sin(rad)},outerRadius=2*opts.pathCircleOuterRadius,prueba=paper.circle(p.x,p.y,outerRadius).attr({fill:colorStroke,stroke:"none",title:title+" - "+indicator+": "+value+"%"});paper.circle(p.x,p.y,2*opts.pathCircleInnerRadius).attr({fill:"#fff",stroke:"none",title:title+" - "+indicator+": "+value}),prueba.hover(over,out)},shape=function(x,y,indicator){var color=dvtUtils.getEUColor();return 0==indicator?color="EU28"==opts.indicators[indicator]||"EU27_2020"==opts.indicators[indicator]?dvtUtils.getEUColor():dvtUtils.getColorCountry(1):1==indicator?color="EU28"==opts.indicators[indicator]||"EU27_2020"==opts.indicators[indicator]?dvtUtils.getEUColor():dvtUtils.getColorCountry(2):2==indicator&&void 0!=opts.indicators[2]&&(color="EU28"==opts.indicators[indicator]||"EU27_2020"==opts.indicators[indicator]?dvtUtils.getEUColor():dvtUtils.getColorCountry(2)),paper.circle(x,y,opts.pathCircleOuterRadius).attr({fill:color,stroke:"none"}),paper.path(["m",x,y,"h",25]).attr({stroke:color,"stroke-width":2}),x+=25,paper.circle(x,y,opts.pathCircleOuterRadius).attr({fill:color,stroke:"none"}),x+10};if(opts.drawArms)for(var i=0,l=values.length,lab={};i<l;){lab=opts.labels[i];var armStrokeColor=lab==country1&&"EU"!=country1?color1:lab==country2&&"EU"!=country2?color2:"EU"==lab?colorEU:opts.armStroke,armStrokeWidth=lab==country1||lab==country2||"EU"==lab?2.5:opts.armStrokeWidth,pathAux=paper.path(function(cx,cy,r,angle){var rad=$r.rad(angle);return["M",cx,cy,"L",cx+r*Math.cos(rad),cy+r*Math.sin(rad),"Z"].join(",")}(cx,cy,r,270+angle*i)).attr({fill:opts.armFill,stroke:armStrokeColor,"stroke-width":armStrokeWidth});pathAux.id=lab,pathAux.attr("cursor","pointer"),pathAux.click(clicked),++i}if(opts.drawMesh){for(var meshCount=Math.floor(r/opts.meshSize),meshHeight=r/meshCount,meshRadius=meshHeight,meshes=[];meshCount--;)meshes.push(function(cx,cy,r,startAngle,angle){for(var mesh=["M"],circle=startAngle+360;startAngle<circle;){var x=cx+r*Math.cos($r.rad(startAngle)),y=cy+r*Math.sin($r.rad(startAngle));mesh.push(x),mesh.push(y),mesh.push("L"),startAngle+=angle}return mesh.push("Z"),mesh.join(",")}(cx,cy,meshRadius,270,angle)),meshRadius+=meshHeight;for(var i=0,l=meshes.length;i<l;)paper.path(meshes[i]).attr({fill:opts.meshFill,stroke:opts.meshStroke,"stroke-width":opts.meshStrokeWidth}),++i}if(opts.drawLabels)for(var i=opts.labels.length,titles=new Object;i--;){var textObject=function(cx,cy,r,angle){var rad=$r.rad(angle),x=cx+r*Math.cos(rad),y=cy+r*Math.sin(rad);return{x:Math.round(x)===cx?x:x<cx?x-10:x+10,y:Math.round(y)===cy?y:y<cy?y-10:y+10,attr:{"text-anchor":Math.round(x)===cx?"middle":x<cx?"end":"start","font-size":opts.labelFontSize,"font-family":"OpenSans",font:""}}}(cx,cy,210,270+angle*i);textObject.attr.title=opts.labels[i],titles[opts.labels[i]]=opts.titles[i];var fulltext=opts.labels[i],text=paper.text(textObject.x,textObject.y,fulltext).attr(textObject.attr);fulltext=fulltext.replace("-","- ").replace("/","/ ");for(var labelStrokeColor=fulltext==country1&&"EU"!=country1?color1:fulltext==country2&&"EU"!=country2?color2:"EU"==fulltext?colorEU:opts.labelColor,labelSize=opts.labelFontSize,words=fulltext.split(" "),wordsCount=words.length,maxwidth=Math.min(textObject.x,paper.width-textObject.x),maxheight=Math.min(textObject.y,paper.height-textObject.y),fontSize=labelSize;fontSize>=9;--fontSize){text.attr("font-size",fontSize),text.attr("fill",labelStrokeColor),text.attr("cursor","context-menu"),text.attr("font-family","OpenSans"),text.id=fulltext,text.hover(function(){-1==this.node.innerHTML.indexOf("<title>")&&(this.node.innerHTML=this.node.innerHTML+"<title>"+titles[this.id]+"</title>")},function(){});for(var tempText="",i1=0;i1<wordsCount;++i1)text.attr("text",tempText+" "+words[i1]),text.getBBox().width>maxwidth?tempText+="\n"+words[i1]:tempText+=" "+words[i1];if(text.attr("text",tempText),text.getBBox().width>maxwidth&&(tempText=tempText.replace("-","-\n"),text.attr("text",tempText)),9==fontSize||text.getBBox().height<=maxheight&&(text.getBBox().width<=maxwidth||wordsCount>1)){tempText.split("\n").length;text.attr("text",tempText.substring(1));break}}}if(path(cx,cy,r,270,values,opts.max),opts.drawPathCircles)for(var i=values.length;i--;)circle(cx,cy,r,270+angle*i,values[i],opts.max,opts.labels[i],opts.indicators[0]);if(opts.drawValues)for(var i=values.length;i--;);if(opts.showTechnicalLegend){var x=.35*paper.width-4*opts.indicators[0].length,y=.93*paper.height;!function(x,y){x=shape(x,y,0),paper.text(x,y,opts.indicators[0]).attr({fill:"EU28"==opts.indicators[0]||"EU27_2020"==opts.indicators[0]?dvtUtils.getEUColor():dvtUtils.getColorCountry(1),"text-anchor":"start","font-size":"14px","font-family":"OpenSans",font:""});var length=opts.indicators[0].length;x+=length>10?7*length:10*length,x=shape(x+10,y,1),paper.text(x,y,opts.indicators[1]).attr({fill:"EU28"==opts.indicators[1]||"EU27_2020"==opts.indicators[1]?dvtUtils.getEUColor():dvtUtils.getColorCountry(2),"text-anchor":"start","font-size":"14px","font-family":"OpenSans",font:""}),void 0!=opts.indicators[2]&&(length=opts.indicators[1].length,x+=length>10?7*length:10*length,x=shape(x+10,y,2),paper.text(x,y,opts.indicators[2]).attr({fill:"EU28"==opts.indicators[2]||"EU27_2020"==opts.indicators[2]?dvtUtils.getEUColor():dvtUtils.getColorCountry(2),"text-anchor":"start","font-size":"14px","font-family":"OpenSans",font:""}))}(x,y)}if(secondIndicatorValues){var theme={pathStroke:"EU28"==opts.indicators[1]||"EU27_2020"==opts.indicators[1]?dvtUtils.getEUColor():dvtUtils.getColorCountry(2),pathFill:"none",pathStrokeWidth:3,pathCircleStroke:"EU28"==opts.indicators[1]||"EU27_2020"==opts.indicators[1]?dvtUtils.getEUColor():dvtUtils.getColorCountry(2)};if(path(cx,cy,r,270,secondIndicatorValues,opts.max,theme),opts.drawPathCircles)for(var i=secondIndicatorValues.length;i--;)circle(cx,cy,r,270+angle*i,secondIndicatorValues[i],opts.max,opts.labels[i],opts.indicators[1],theme);if(opts.drawValues)for(var i=secondIndicatorValues.length;i--;);}if(thirdIndicatorValues){var theme={pathStroke:"EU28"==opts.indicators[2]||"EU27_2020"==opts.indicators[2]||void 0==opts.indicators[2]&&("EU28"==opts.indicators[1]||"EU27_2020"==opts.indicators[1])?dvtUtils.getEUColor():dvtUtils.getColorCountry(2),pathFill:"none",pathStrokeWidth:3,pathCircleStroke:"EU28"==opts.indicators[2]||"EU27_2020"==opts.indicators[2]||void 0==opts.indicators[2]&&("EU28"==opts.indicators[1]||"EU27_2020"==opts.indicators[1])?dvtUtils.getEUColor():dvtUtils.getColorCountry(2)},indicator="undefined";if(indicator=secondIndicatorValues.length>0?opts.indicators[2]:opts.indicators[1],path(cx,cy,r,270,thirdIndicatorValues,opts.max,theme),opts.drawPathCircles)for(var i=thirdIndicatorValues.length;i--;)circle(cx,cy,r,270+angle*i,thirdIndicatorValues[i],opts.max,opts.labels[i],indicator,theme);if(opts.drawValues)for(var i=thirdIndicatorValues.length;i--;)var textObject=function(cx,cy,r,angle,value,max){var rad=$r.rad(angle),x=cx+r/max*value*Math.cos(rad),y=cy+r/max*value*Math.sin(rad);return Math.round(x)===cx&&(y+=10*Math.sin(rad)),{x:Math.round(x)===cx?x+2:x<cx?x-10:x+10,y:Math.round(y)===cy?y-2:y<cy?y-10:y+10,attr:{"text-anchor":Math.round(x)===cx?"middle":x<cx?"end":"start","font-size":opts.valueFontSize,"font-family":"OpenSans-bold",fill:dvtUtils.getEUColor()}}}(cx,cy,r,270+angle*i,thirdIndicatorValues[i],opts.max),fulltext=thirdIndicatorValues[i]+opts.valuesFormat,text=paper.text(textObject.x,textObject.y,fulltext).attr(textObject.attr)}}Raphael.fn.radar=function(cx,cy,r,values,secondIndicatorValues,thirdIndicatorValues,opts){return new Radar(this,cx,cy,r,values,secondIndicatorValues,thirdIndicatorValues,opts)},$q.all(scope.promises).then(function(dataset){var firstIndicatorValues=[],firstIndicatorLabels=[],firstIndicatorTitles=[],secondIndicatorValues=[],thirdIndicatorValues=[],indicatorNames=[];dataset[0].data.resultset.forEach(function(element,index,array){$log.debug("########################---------\x3e"+element),firstIndicatorLabels.push(element[0]),firstIndicatorValues.push(element[1]),indicatorNames.indexOf(element[2])<0&&indicatorNames.push(element[2]),element[3]&&firstIndicatorTitles.push(element[3])}),dataset[1]&&dataset[1].data.resultset.forEach(function(element,index,array){$log.debug("########################---------\x3e"+element),secondIndicatorValues.push(element[1]),indicatorNames.indexOf(element[2])<0&&indicatorNames.push(element[2])}),dataset[2]&&dataset[2].data.resultset.forEach(function(element,index,array){$log.debug("########################---------\x3e"+element),thirdIndicatorValues.push(element[1]),indicatorNames.indexOf(element[2])<0&&indicatorNames.push(element[2])}),scope.data=[indicatorNames,firstIndicatorTitles,firstIndicatorLabels,firstIndicatorValues,secondIndicatorValues,thirdIndicatorValues];var paper=Raphael(scope.id,definition.width,definition.height);paper.setViewBox(0,0,definition.width,definition.height);var svg=document.querySelector("#"+scope.id+" svg");svg.removeAttribute("width"),configService.isIE()||configService.isMobile()||svg.removeAttribute("height"),configService.isMobile()&&(svg.removeAttribute("height"),svg.setAttribute("width","100%")),paper.radar(definition.width/2-20,definition.height/2-20,attributes.radio,firstIndicatorValues,secondIndicatorValues,thirdIndicatorValues,{meshSize:attributes.meshSize||20,labels:firstIndicatorLabels,titles:firstIndicatorTitles,labelFontSize:12,labelColor:"black",drawLabels:attributes.drawLabels||!0,valuesColor:dvtUtils.getSpiderValuesColor(),valuesFormat:attributes.valuesFormat||"",drawAllValues:!1,armFill:"none",armStroke:"rgba(120, 120, 120, .3)",armStrokeWidth:1,drawArms:!0,meshFill:"none",meshStroke:"rgba(120, 120, 120, .5)",meshStrokeWidth:1,drawMesh:!0,max:attributes.axisFixedMax||100,pathFill:"none",pathStroke:"EU28"==indicatorNames[0]||"EU27_2020"==indicatorNames[0]?dvtUtils.getEUColor():dvtUtils.getColorCountry(1),pathStrokeWidth:3,pathCircleOuterRadius:1.5,pathCircleInnerRadius:0,pathCircleStroke:"EU28"==indicatorNames[0]||"EU27_2020"==indicatorNames[0]?dvtUtils.getEUColor():dvtUtils.getColorCountry(1),drawPathCircles:!0,showTechnicalLegend:!0,indicators:indicatorNames}),paper.canvas.setAttribute("preserveAspectRatio","xMaxYMin")})}};if(scope.datasourceAndDates){var datasource=scope.datasourceAndDates[0],indicator=scope.datasourceAndDates[1];dataService.getDatasourceAndDates(datasource,indicator).then(function(data){data.data.resultset.map(function(elem){scope.datasources.push({datasource:elem[0],date_from:elem[1],date_to:elem[2]})})}).catch(function(err){throw err})}if($log.debug("Link function of "+scope.id),!scope.contextuals||scope.contextuals.length>0){scope.contextuals||(scope.contextuals=[]),attributes.isMaximized||scope.contextuals.push(["Maximize","maximize"]);window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv:11\./)||navigator.userAgent.match(/Edge/)?[["Download raw data","exportData","download-button"]].forEach(function(item){scope.contextuals.push(item)}):(configService.isMobile(),[["Download raw data","exportRadarChartData","download-button"]].forEach(function(item){scope.contextuals.push(item)}),[["Export image","exportImage","download-button"]].forEach(function(item){scope.contextuals.push(item)}))}scope.showContextuals=scope.contextuals&&scope.contextuals.length>0||!1,scope.showContextuals&&(scope.items=[],scope.contextuals.forEach(function(item,index,array){scope.items.push({text:item[0],action:item[1]})}));scope.isMaximized||function(){definition.maxType="radar",definition.title=attributes.title,definition.cssClass=attributes.cssClass,definition.pcountry1=scope.country1,definition.pCountry2=scope.country2,definition.promises=scope.promises,definition.id=attributes.id,definition.max=attributes.axisFixedMax,definition.longTitle=attributes.longTitle,definition.chartTitle=attributes.chartTitle,definition.radio=attributes.radio,definition.valuesFormat=attributes.valuesFormat,definition.meshSize=attributes.meshSize||30,attributes.maxFunctionalLegend&&(definition.maxFunctionalLegend=attributes.maxFunctionalLegend)}();var dvtModal=maximize.setModal(definition);scope.open=function(action){if("function"==typeof action)action.call(this);else switch(action){case"enlarge":var scrollTop=$(window).scrollTop();$cookies.remove("scrollTop"),$cookies.put("scrollTop",scrollTop),scope.clickAction();break;case"maximize":maximize.doMaximize(dvtModal,definition,"maximizeRadar","MaximizeController",!1);break;case"exportImage":maximize.doMaximize(dvtModal,definition,"maximizeRadar","MaximizeController",!0);break;case"exportImageLink":exportService.exportImageAction(scope);break;case"exportData":exportService.exportDataAction(scope,dashboard);break;case"exportRadarChartData":exportService.exportRadarData(scope.promises,scope.chartTitle,scope.id)}};var chart=new RaphaelComponent(definition);dashboard.register(chart),chart.postExecution=function(){scope.postExecution&&scope.postExecution(),this.width=this.placeholder().width()}}}}var RaphaelComponent=require("cde/components/RaphaelComponent"),configService=require("horizontal/config/configService"),sequence=1;return DvtRadarDirective.$inject=["$q","$log","dvtUtils","plotsProvider","exportService","dataService","maximize"],DvtRadarDirective});