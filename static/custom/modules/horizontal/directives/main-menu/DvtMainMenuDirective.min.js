function zoomSmall(){$("html").css("font-size","8px"),$("body").removeClass("plus").addClass("minor")}function zoomMedium(){$("html").css("font-size","10px"),$("body").removeClass("plus"),$("body").removeClass("minor")}function zoomBig(){$("html").css("font-size","12px"),$("body").removeClass("minor"),$("body").addClass("plus")}function gotoTop(){$("html,body").animate({scrollTop:0},"slow")}var resolution=screen.width;define(function(require){"use strict";function DvtMenuDirective($location,$log){return{restrict:"E",transclude:!0,replace:!0,scope:{},controller:["$rootScope","$scope","$state","$window","configService","$http","$log","dataService","$compile","$sce","$cookies",function($rootScope,$scope,$state,$window,configService,$http,$log,dataService,$compile,$sce,$cookies){new google.translate.TranslateElement({pageLanguage:"en",autoDisplay:!1,layout:google.translate.TranslateElement.InlineLayout.SIMPLE},"google_translate_element");var prevScrollpos=$window.pageYOffset;$(window).on("resize",function(e){resolution=screen.width,angular.element("li.dropdown").removeClass("open"),angular.element("li.dropdown").off("hover")}),$window.onscroll=function(){if(void 0!=angular.element(".highlited--data--section")[0]){angular.element(".highlited--data--section")[0].offsetTop<$window.pageYOffset?angular.element("body").addClass("section-fixed"):angular.element("body").removeClass("section-fixed")}else angular.element("body").removeClass("section-fixed")},$window.onscroll=function(){var currentScrollPos=$window.pageYOffset;currentScrollPos>90&&(prevScrollpos>currentScrollPos?(angular.element(".bar-header").addClass("show-header"),angular.element(".affix").addClass("show-header"),angular.element(".affix").removeClass("hide-header"),angular.element(".bar-header").removeClass("hide-header")):(angular.element(".bar-header").addClass("hide-header"),angular.element(".affix").addClass("hide-header"),angular.element(".affix").removeClass("show-header"),angular.element(".bar-header").removeClass("show-header")),prevScrollpos=currentScrollPos,angular.element(".advice--block-not-home").length>0&&prevScrollpos<=angular.element(".advice--icon--block").offset().top+angular.element(".advice--icon--block")[0].clientHeight&&angular.element(".compare--block.regulation-page").removeClass("show-header"));var gotopVisible=$(window).height()+$(window).height()/2;resolution<=1024&&currentScrollPos>gotopVisible?$(".go-to").css("display","block"):$(".go-to").css("display","none")},configService.isMobile()&&($(".print--block").addClass("hide"),$(".zoom--text").addClass("hide")),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?($("body").addClass("mobile-device"),$(".print--block").addClass("hide"),$(".zoom--text").addClass("hide")):($("body").removeClass("mobile-device"),$(".print--block").removeClass("hide"),$(".zoom--text").removeClass("hide")),$("body").on("click touchstart",function(e){var container=angular.element(".filter--dropdown--wrapper");container.is(e.target)||0!==container.has(e.target).length||angular.element(".filter--dropdown--wrapper").removeClass("viewOptions")}),$(".goog-te-menu-value").attr("accesskey","L"),$scope.goto=function(pState){$state.go(pState,{})};var i18n_literals=configService.getLiterals();$scope.i18n_literals=i18n_literals;var breadCrumbStructure=require("json!dvt/directives/breadcrumb-items"),titleStructure=require("json!dvt/directives/title-items"),path=configService.getHorizontalDirectiveDataPath("main-menu","menu");$http.get(path,{data:"",headers:{"Content-Type":"application/json"}}).success(function(menuStructure){$scope.structure=menuStructure}),$scope.isCurrentStateMenu=function(path){var lPath=$location.path().split("/");return $log.debug("isCurrentStateMenu and menu variable  |  path: "+path+"  |  lPath[1]: "+lPath[1]),"structure-strategy"==path||"response-strategy"==path||"overall-opinion"==path||"mental-risk"==path||"physical-risk"==path?"hidden":path===lPath[1]||""==lPath[1]&&"home"==path||"about-tool-detail-page"==lPath[1]&&"about-tool"==path?"main-menu-selected":""},$scope.goToMethodology=function(){$state.go("methodology",{"#":$state.href($state.current.name,{},{absolute:!1}).split("/")[1]})},$scope.hideLinkMethodology=function(){if(null!==$state.href($state.current.name,{},{absolute:!1})){return-1!==["about-tool","legal-notice","accessibility","privacy-notice","site-map","newNonSenseState"].indexOf($state.href($state.current.name,{},{absolute:!1}).split("/")[1])?"hidden":""}return""},$scope.isCurrentSection=function(id){var lPath=$location.path().split("/");return $log.debug("isCurrentSection and menu variable  |  "+id.replace(/\s+/g,"-")+"  |  "+breadCrumbStructure.sections[lPath[1]]),$scope.pathURLDVT=$location.absUrl(),$scope.pathURLDVTGoogle="https://plus.google.com/share?url="+$scope.pathURLDVT,id.replace(/\s+/g,"-")===breadCrumbStructure.sections[lPath[1]]||id.replace(/\s+/g,"-")===breadCrumbStructure.sections[lPath[2]]?"main-menu-selected":""},$scope.titleS=titleStructure,$scope.pathURLDVT=$location.absUrl(),$scope.pathURLDVTGoogle=$scope.pathURLDVT.replace("#","?_escaped_fragment_="),$rootScope.$on("$viewContentLoading",function(event,viewConfig){$log.debug("Loading $viewContentLoading");var path=$location.path();$log.debug(path),$log.warn($state.current.name),"workforce-profile"!=$state.current.name&&$(".dvt-map-tooltip").remove();if($scope.breadCrumb=breadCrumbStructure[$state.current.name],$scope.titleHeader=$scope.i18n_literals.L22020,"home"==$state.current.name)$scope.isHome=!0,$scope.title=titleStructure[$state.current.name];else{path.split("/");$scope.isHome=!1;!function(){for(var _link=$compile(breadCrumbStructure[$state.current.name])($scope),breadcrumb="",i=0;i<_link.size();i++)breadcrumb+=_link[i].outerHTML;$scope.breadCrumb=$sce.trustAsHtml(breadcrumb),$scope.title=titleStructure[$state.current.name],$scope.isHome=!1,$scope.anchorPath=$location.path().split("/")[1]}()}},$scope),$rootScope.$on("$locationChangeSuccess",function(){collapse.removeClass("exposed"),navMainMenu.removeClass("exposed"),buttonToggle.removeClass("exposed"),angular.element(".bar-header").removeClass("hide-header")}),$rootScope.$on("$stateNotFound",function(event,unfoundState,fromState,fromParams){$state.go("404",{}),console.warn("$stateChangeError: "),console.warn("unfoundState.to: "+unfoundState.to),console.warn("unfoundState.to: "+unfoundState.to),console.warn("unfoundState.options: "+unfoundState.options)}),$rootScope.$on("$stateChangeError",function(event,toState,toParams,fromState,fromParams,error){$state.go("404",{}),console.warn("$stateChangeError: "),console.warn("unfoundState.to: "+unfoundState.to),console.warn("unfoundState.to: "+unfoundState.to),console.warn("unfoundState.options: "+unfoundState.options)});var buttonToggle=angular.element("button.navbar-toggle"),navMainMenu=angular.element("nav.bar-main-menu"),collapse=angular.element(".collapse.navbar-collapse"),glassIcon=angular.element(".icon-glass-tablet"),formSearch=angular.element(".search--form");1==collapse.hasClass("exposed")&&(collapse.removeClass("exposed"),collapse.removeClass("in")),buttonToggle.click(function(){formSearch.removeClass("exposed"),collapse.removeClass("in"),glassIcon.removeClass("exposed"),collapse.toggleClass("exposed"),navMainMenu.toggleClass("exposed"),buttonToggle.toggleClass("exposed")}),glassIcon.click(function(){collapse.removeClass("in"),collapse.removeClass("exposed"),navMainMenu.removeClass("exposed"),buttonToggle.removeClass("exposed"),glassIcon.toggleClass("exposed"),formSearch.toggleClass("exposed")}),$scope.getPageSetClass=function(){var path=document.location.href.split("/"),num=path.length;if("full-country-report"==path[num-1])return $("html").addClass("full-country-report"),$("body").addClass("full-country-report"),path[num-1]},void 0==$rootScope.defaultCountry&&(void 0!=$cookies.get("selectedCountry")?$rootScope.defaultCountry={code:$cookies.get("selectedCountry"),isCookie:!0,selectedByUser:!0}:(navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(position){$http.get("https://iplist.cc/api/").success(function(coordinates){["AT","BG","CH","CY","CZ","DE","DK","EE","EL","ES","FI","FR","HR","HU","IE","IS","IT","LT","LU","LV","MT","NL","NO","PL","PT","RO","SE","SI","SK","UK"].indexOf(coordinates.countrycode)>-1&&($rootScope.defaultCountry={code:coordinates.countryCode,isCookie:!1,selectedByUser:!0},$rootScope.defaultCountryDefaultValue=coordinates.countrycode,$state.current.name,$state.reload())})}),$rootScope.defaultCountry={code:"AT",isCookie:!1,selectedByUser:!1},$rootScope.defaultCountryDefaultValue="AT"))}],templateUrl:configService.getHorizontalDirectiveTplPath("main-menu","menu")}}var configService=require("horizontal/config/configService");return DvtMenuDirective.$inject=["$location","$log"],DvtMenuDirective});