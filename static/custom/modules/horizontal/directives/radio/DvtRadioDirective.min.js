define(function(require){"use strict";function nextId(){return sequence++}function DvtRadioDirective(dataService,$log){return{restrict:"E",require:["ngModel","^dvtDashboard"],scope:{},template:'<div id="indicators-content" bs-affix=""  data-spy="affix" data-offset-top="200" class="col-lg-12 hidden"><div><span ng-attr-id="{{id}}" /></div></div></div>',link:function(scope,element,attributes,controllers){var dashboard=controllers[1],ngModel=controllers[0];scope.id="dvt_radio_"+nextId();var definition={name:scope.id,type:"radioComponent",parameter:attributes.parameter,priority:1,valueAsId:!1,htmlObject:scope.id,executeAtStart:!0,queryDefinition:{dataAccessId:attributes.query,path:attributes.cda},postChange:function(selected){ngModel.$setViewValue(selected,"change")},postExecution:function(){if("approaches"==attributes.extension){$log.debug("DvtRadioDirective ##################");var options=document.querySelectorAll("#indicators-content li.toggleGroup.horizontal");dataService.getGroupingInformation().then(function(dataset){var cont=1;[].forEach.call(options,function(option,index){$log.debug("DvtRadioDirective index isChecked: "+option.checked),1==option.firstChild.checked?option.className+="  col-xs-12 col-sm-6 col-md-3 active boxGroup  boxGroup"+cont:option.className+="  col-xs-12 col-sm-6 col-md-3 boxGroup  boxGroup"+cont,option.setAttribute("role","button"),$(option).bind("click",function(){ngModel.$setViewValue($(this).find("input").attr("value"),"change")});var divElem=document.createElement("div"),countryList=dataset.data.resultset[index][3],pos=countryList.lastIndexOf(", ");countryList=countryList.substring(0,pos)+" and "+countryList.substring(pos+1),divElem.innerHTML="<p><strong>Main features</strong></p>"+dataset.data.resultset[index][2]+"<p class='countryListRadio'><strong>Country list:</strong> "+countryList+"</p>",option.appendChild(divElem),cont++}),document.querySelector("#indicators-content").classList.remove("hidden")}).catch(function(err){throw err})}}};attributes.listenTo&&(definition.listeners=attributes.listenTo),dashboard.register(new SelectComponent(definition))}}}var SelectComponent=require("cdf/components/RadioComponent"),sequence=(require("horizontal/config/configService"),1);return DvtRadioDirective.$inject=["dataService","$log"],DvtRadioDirective});