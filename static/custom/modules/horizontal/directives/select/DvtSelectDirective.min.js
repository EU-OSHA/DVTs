define(function(require){"use strict";function nextId(){return sequence++}function DvtSelectDirective($log){return{restrict:"E",priority:1,transclude:!0,require:["ngModel","^dvtDashboard"],scope:{params:"=",listenTo:"="},template:'<div ng-attr-id="{{id}}" />',link:function(scope,element,attributes,controllers){var ngModel=controllers[0],dashboard=controllers[1];scope.id="dvt_select_"+nextId(),scope.placeholder=attributes.placeholder;var definition={name:scope.id,type:"selectComponent",priority:attributes.priority||1,parameter:attributes.parameter,listeners:[],valueAsId:!1,externalPlugin:"select2",htmlObject:scope.id,executeAtStart:!0,queryDefinition:{dataAccessId:attributes.query,path:attributes.cda},postChange:function(selected){this.dashboard.fireChange(attributes.parameter,selected),ngModel.$setViewValue(selected,"change")},postExecution:function(){var divs=document.querySelectorAll("div.select2-container");[].forEach.call(divs,function(div){})},postFetch:function(data){"1"==attributes.placeholder&&(data.resultset.unshift(["0",i18nLiterals.L20630]),data.queryInfo.totalRows++)}};if(scope.params&&(definition.parameters=scope.params),scope.listenTo)for(var listen in scope.listenTo)definition.listeners[listen]=scope.listenTo[listen];$log.debug("new SelectDirective | id: "+scope.id),dashboard.register(new SelectComponent(definition))}}}var SelectComponent=require("cdf/components/SelectComponent"),configService=require("horizontal/config/configService"),i18nLiterals=configService.getLiterals(),sequence=1;return DvtSelectDirective.$inject=["$log"],DvtSelectDirective});