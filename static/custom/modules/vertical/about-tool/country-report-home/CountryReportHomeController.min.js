define(function(require){"use strict";function controller($scope,$window,$stateParams,$state,$log,dvtUtils,dataService,plotsProvider,$document,configService,$http,CountryReportService,$rootScope,$location){function anchorOffset(){null!=$location.hash()&&""!=$location.hash()&&$timeout(function(){resolution<768?angular.element("html, body").animate({scrollTop:angular.element("#"+$location.hash())[0].offsetTop+290},"slow","swing"):resolution>=768&&resolution<1024?angular.element("html, body").animate({scrollTop:angular.element("#"+$location.hash())[0].offsetTop-90},"slow","swing"):angular.element("html, body").animate({scrollTop:angular.element("#"+$location.hash())[0].offsetTop-200},"slow","swing")},500)}$scope.title="About the Visualisation Tool",$scope.cda=configService.getCountryReportCda();var i18nLiterals=configService.getLiterals();$scope.i18nLiterals=i18nLiterals,$scope.countries=[],$scope.countryFilter=[],$scope.alphabet=[];var resolution=screen.width;$(window).on("resize",function(e){screen.width!=resolution&&(resolution=screen.width,anchorOffset())}),anchorOffset(),angular.element("div.countries-filters").css("display","none"),angular.element("#filter2 h2").addClass("showChallenges"),$scope.toggleFilters=function(){$window.outerWidth<768&&(angular.element("#filter2 h2").toggleClass("showChallenges"),angular.element("div.countries-filters").slideToggle("slow"))},dataService.getCountryReportHomeCountries().then(function(data){var letter="",index="";data.data.resultset.map(function(elem){$stateParams.filter&&$stateParams.filter;$scope.countries.push({country:elem[0],country_code:elem[1]}),letter=$scope.i18nLiterals["L"+elem[0]].charAt(0),-1==(index=$scope.alphabet.indexOf(letter))&&$scope.alphabet.push(letter)}),$scope.alphabet.sort()}).catch(function(err){throw err}),$scope.resetFilter=function(){$scope.countryFilter=[],searchCountries($scope.countryFilter)},$scope.addLetter=function(pLetter){-1==$scope.countryFilter.indexOf(pLetter)?$scope.countryFilter.push(pLetter):$scope.countryFilter.splice($scope.countryFilter.indexOf(pLetter),1),searchCountries($scope.countryFilter)};var searchCountries=function(pFilters){dataService.getCountryReportHomeCountriesFilter($scope.countryFilter).then(function(pData){$scope.countries=dataService.dataMapper(pData)}).catch(function(err){throw err})};$scope.goToAnchor=function(letter){var newHash="section"+letter;resolution<768?angular.element("html, body").animate({scrollTop:angular.element("#"+newHash)[0].offsetTop+350},"slow","swing"):angular.element("html, body").animate({scrollTop:angular.element("#"+newHash)[0].offsetTop-400},"slow","swing"),$location.hash("section"+letter)},$scope.countryByLetter=function(letter){return $scope.countries.filter(function(country){return $scope.i18nLiterals["L"+country.country].charAt(0)==letter})},$scope.status="ready"}return controller.$inject=["$scope","$window","$stateParams","$state","$log","dvtUtils","dataService","plotsProvider","$document","configService","$http","CountryReportService","$rootScope","$location"],controller});