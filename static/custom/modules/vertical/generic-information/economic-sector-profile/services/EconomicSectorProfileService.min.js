define(function(require){var configService=require("horizontal/config/configService"),pv=require("cdf/lib/CCC/protovis"),EconomicSectorProfileService=function(dvtUtils,$log){return{getCompanySizeMainPlots:function(pCountry1,pCountry2){this.dashboard;return[{name:"main",dataPart:"0",valuesOverflow:"show",label_textStyle:function(scene){var subIndicatorKey=scene.firstAtoms.series;return scene.firstAtoms.value.label.match("%")||(scene.firstAtoms.value.label=scene.firstAtoms.value.label+"%"),"From 0 to 9 persons employed"==subIndicatorKey?dvtUtils.getColorCountry(1):"From 10 to 19 persons employed"==subIndicatorKey?dvtUtils.getColorCountry(22):"From 20 to 49 persons employed"==subIndicatorKey?dvtUtils.getAccidentsColors(4):"From 50 to 249 persons employed"==subIndicatorKey?dvtUtils.getColorCountry(12):"250 persons employed or more"==subIndicatorKey?dvtUtils.getColorCountry(2):dvtUtils.getChartLightGrayColor()},label_textMargin:2,valuesAnchor:"right",valuesOptimizeLegibility:!0,visualRoles:{series:"series",category:"category"}}]},getEmploymentPerSectorPlots:function(){this.dashboard;return[{name:"main",dataPart:"0",bar_fillStyle:function(scene){var subIndicatorKey=scene.firstAtoms.series;return scene.firstAtoms.value.label.match("%")||(scene.firstAtoms.value.label=scene.firstAtoms.value.label+"%"),"Agriculture, forestry and fishing"==subIndicatorKey?dvtUtils.getColorCountry(1):"Manufacturing"==subIndicatorKey?dvtUtils.getColorCountry(22):"Construction, waste management, water and electricity supply"==subIndicatorKey?dvtUtils.getAccidentsColors(4):"Trade, transport, food/accommodation and recreation activities"==subIndicatorKey?dvtUtils.getColorCountry(3):"IT, Finance, real state and other technical scientific or personal service activities"==subIndicatorKey||"IT, Finance, Real estate and other technical scientific or personal service activities"==subIndicatorKey?dvtUtils.getColorCountry(2):"Public administration"==subIndicatorKey?dvtUtils.getColorCountry(12):"Education, human health and social work activities"==subIndicatorKey?dvtUtils.getColorCountry(4):void 0},visualRoles:{series:"series",category:"category"}}]},getEmploymentRateMainPlots:function(pCountry1,pCountry2){return[{name:"main",dataPart:"0",label_textStyle:function(scene){var countryKey=scene.firstAtoms.category.label;return scene.firstAtoms.value.label.match("%")||(scene.firstAtoms.value.label=scene.firstAtoms.value.label+"%"),"EU28"==countryKey?dvtUtils.getEUColor():countryKey.match(pCountry1)?dvtUtils.getColorCountry(1):countryKey.match(pCountry2)?dvtUtils.getColorCountry(2):dvtUtils.getChartLightGrayColor()},bar_fillStyle:function(scene){var countryKey=scene.firstAtoms.category.label;return"EU28"==countryKey?dvtUtils.getEUColor():countryKey.match(pCountry1)?dvtUtils.getColorCountry(1):countryKey.match(pCountry2)?dvtUtils.getColorCountry(2):dvtUtils.getChartLightGrayColor()},label_textMargin:5,valuesAnchor:"right",valuesOptimizeLegibility:!0,visualRoles:{category:"category"}}]},getUnemploymentRateMainPlots:function(pCountry1,pCountry2){return[{name:"main",dataPart:"0",label_textStyle:function(scene){var countryKey=scene.firstAtoms.category;return scene.firstAtoms.value.label.match("%")||(scene.firstAtoms.value.label=scene.firstAtoms.value.label+"%"),"EU28"==countryKey?dvtUtils.getEUColor():countryKey==pCountry1?dvtUtils.getColorCountry(1):countryKey==pCountry2?dvtUtils.getColorCountry(2):dvtUtils.getChartLightGrayColor()},bar_fillStyle:function(scene){var countryKey=scene.firstAtoms.category,countryValue=scene.firstAtoms.value;return countryValue.value>parseInt(this.sign.chart.options.orthoAxisFixedMax)&&(this.sign.chart.options.orthoAxisFixedMax=countryValue.value),"EU28"==countryKey?dvtUtils.getEUColor():countryKey==pCountry1?dvtUtils.getColorCountry(1):countryKey==pCountry2?dvtUtils.getColorCountry(2):dvtUtils.getChartLightGrayColor()},label_textMargin:7,label_textBaseline:"bottom",valuesAnchor:"top",valuesOptimizeLegibility:!0,visualRoles:{category:"category"}}]},getGPDMainPlots:function(pCountry1,pCountry2){return[{name:"main",dataPart:"0",bar_visible:"true",bar_fillStyle:"#f0f0f0",label_textStyle:"dimgray",label_textMargin:2,label_textBaseline:"center",valuesOptimizeLegibility:!1,valuesAnchor:"bottom",valuesOverflow:"show",overflowMarkersVisible:!1,bar_call:function(){this.add(pv.Image).url(function(scene){var countryKey=scene.firstAtoms.category;return countryKey.label.match(pCountry1)?configService.getImagesPath()+"man_orange.svg":countryKey.label.match(pCountry2)?configService.getImagesPath()+"man.svg":"EU28"==countryKey?configService.getImagesPath()+"man_blue.svg":void 0}).bottom(20).height(function(scene){var axisFixedMax=this.root.sign.chart.options.axisFixedMax,panelHeight=this.root.height(),valueKey=scene.firstAtoms.value,resul=valueKey*(panelHeight-this.bottom())/axisFixedMax;return valueKey>=220&&(this.root.sign.chart.options.axisFixedMax=420),resul}).width(function(scene){scene.firstAtoms.value;return.45333*this.height()}).left(function(scene){var panelWidth=this.root.width(),barWidth=panelWidth/3.5,countryKey=scene.firstAtoms.category;if(300!=panelWidth){if(countryKey.label.match(pCountry1))return scene.nextSibling.firstAtoms.category.label.match(pCountry2)?(barWidth-this.width())/2+5:panelWidth/2-(barWidth+this.width()/2)+5;if(countryKey.label.match(pCountry2)){return null==scene.previousSibling?panelWidth/2-(barWidth+this.width()/2)+5:panelWidth/3+(barWidth-this.width())/2}if("EU28"==countryKey){var firstSibling=scene.previousSibling.previousSibling;return scene.previousSibling.firstAtoms.category.label.match(pCountry2)&&null!=firstSibling?panelWidth/1.5+(barWidth-this.width())/2-5:panelWidth/2+this.width()/1.5}}}).events("all").cursor("hand")},visualRoles:{category:"category"}}]},getIncomeMainPlots:function(pCountry1,pCountry2){this.dashboard;return[{name:"main",dataPart:"0",line_lineWidth:1.5,line_strokeStyle:function(scene){var countryKey=scene.firstAtoms.series,countryValue=scene.firstAtoms.value;return scene.firstAtoms.value.label.match("€")||(scene.firstAtoms.value.label=scene.firstAtoms.value.label+" €"),countryValue.value>parseInt(this.sign.chart.options.orthoAxisFixedMax)&&(this.sign.chart.options.orthoAxisFixedMax=countryValue.value+1e3),countryValue.value<parseInt(this.chart.options.orthoAxisFixedMin)&&(this.chart.options.orthoAxisFixedMin=countryValue.value),"EU28"==countryKey?dvtUtils.getEUColor():countryKey.label.match(pCountry1)?dvtUtils.getColorCountry(1):countryKey.label.match(pCountry2)?dvtUtils.getColorCountry(2):dvtUtils.getChartLightGrayColor()},dot_strokeStyle:function(scene){var countryKey=scene.firstAtoms.series,countryValue=scene.firstAtoms.value;return countryValue.value>parseInt(this.sign.chart.options.orthoAxisFixedMax)&&(this.sign.chart.options.orthoAxisFixedMax=countryValue.value+1e3),countryValue.value<parseInt(this.chart.options.orthoAxisFixedMin)&&(this.chart.options.orthoAxisFixedMin=countryValue.value),"EU28"==countryKey?dvtUtils.getEUColor():countryKey.label.match(pCountry1)?dvtUtils.getColorCountry(1):countryKey.label.match(pCountry2)?dvtUtils.getColorCountry(2):dvtUtils.getChartLightGrayColor()},dot_fillStyle:function(scene){var countryKey=scene.firstAtoms.series,countryValue=scene.firstAtoms.value;return countryValue.value>parseInt(this.sign.chart.options.orthoAxisFixedMax)&&(this.sign.chart.options.orthoAxisFixedMax=countryValue.value+1e3),countryValue.value<parseInt(this.chart.options.orthoAxisFixedMin)&&(this.chart.options.orthoAxisFixedMin=countryValue.value),"EU28"==countryKey?dvtUtils.getEUColor():countryKey.label.match(pCountry1)?dvtUtils.getColorCountry(1):countryKey.label.match(pCountry2)?dvtUtils.getColorCountry(2):dvtUtils.getChartLightGrayColor()},label_textStyle:function(scene){var countryKey=scene.firstAtoms.series;return"EU28"==countryKey?dvtUtils.getEUColor():countryKey.label.match(pCountry1)?dvtUtils.getColorCountry(1):countryKey.label.match(pCountry2)?dvtUtils.getColorCountry(2):dvtUtils.getChartLightGrayColor()},label_textMargin:function(scene){var countryKey=scene.firstAtoms.series;return"EU28"==countryKey?5:countryKey.label.match(pCountry1)?8:countryKey.label.match(pCountry2)?9:void 0},label_textBaseline:function(scene){var countryKey=scene.firstAtoms.series,countryYear=(scene.firstAtoms.value,scene.firstAtoms.category),resultset=this.chart.resultset;if(resultset.length>4){var country1Value1=this.chart.resultset[0][2],country1Value2=this.chart.resultset[1][2],country2Value1=this.chart.resultset[2][2],country2Value2=this.chart.resultset[3][2],euValue1=this.chart.resultset[4][2],euValue2=this.chart.resultset[5][2],difference1=country1Value1-country2Value1<900&&country1Value1-country2Value1>0||country1Value1-country2Value1>-900&&country1Value1-country2Value1<0,difference2=country1Value2-country2Value2<900&&country1Value2-country2Value2>0||country1Value2-country2Value2>-900&&country1Value2-country2Value2<0,difference3=country1Value1-euValue1<1e3&&country1Value1-euValue1>0||country1Value1-euValue1>-1e3&&country1Value1-euValue1<0,difference4=country1Value2-euValue2<2e3&&country1Value2-euValue2>0||country1Value2-euValue2>-2e3&&country1Value2-euValue2<0,difference5=country2Value1-euValue1<1e3&&country2Value1-euValue1>0||country2Value1-euValue1>-1e3&&country2Value1-euValue1<0,difference6=country2Value2-euValue2<1e3&&country2Value2-euValue2>0||country2Value2-euValue2>-1e3&&country2Value2-euValue2<0;if("EU28"==countryKey){var baseline="top";return difference5&&"2010"==countryYear?baseline="bottom":difference6&&"2017"==countryYear&&(baseline="bottom"),difference3&&"2010"==countryYear?baseline="top":difference4&&"2017"==countryYear&&(baseline="bottom"),baseline}return countryKey.label.match(pCountry1)?difference1&&"2010"==countryYear?"top":difference2&&"2017"==countryYear?"top":"bottom":countryKey.label.match(pCountry2)?difference5&&"2010"==countryYear?"top":difference6&&"2017"==countryYear?"top":"bottom":"top"}if(4==resultset.length){countryKey.label.match(pCountry1)&&(this.sign.chart.options.colors=[dvtUtils.getColorCountry(1),dvtUtils.getEUColor()]),countryKey.label.match(pCountry2)&&(this.sign.chart.options.colors=[dvtUtils.getColorCountry(2),dvtUtils.getEUColor()]);var country1Value1=this.chart.resultset[0][2],country1Value2=this.chart.resultset[1][2],euValue1=this.chart.resultset[2][2],euValue2=this.chart.resultset[3][2],difference3=country1Value1-euValue1<1e3&&country1Value1-euValue1>0||country1Value1-euValue1>-1e3&&country1Value1-euValue1<0,difference4=country1Value2-euValue2<1e3&&country1Value2-euValue2>0||country1Value2-euValue2>-1e3&&country1Value2-euValue2<0;return"EU28"==countryKey?difference3&&"2010"==countryYear?"bottom":difference4&&"2017"==countryYear?"bottom":"top":"top"}if(2==resultset.length)return this.sign.chart.options.colors=[dvtUtils.getEUColor()],"top"},visualRoles:{series:"series",category:"category"}}]}}};return EconomicSectorProfileService.$inject=["dvtUtils","$log"],EconomicSectorProfileService});