define(function(require){"use strict";function controller(configService,dvtUtils,$scope,$stateParams,$state,$document,$log,dataService,$window,$rootScope,$cookies){var i18n=configService.getLiterals();$scope.i18n=i18n;var i18n_home=require("json!vertical/home/i18n");$scope.i18n_home=i18n_home,$scope.datasetList=configService.getDatasets(),$scope.datasetESENER=$scope.datasetList.ESENER,$scope.countries=[],$scope.strategiesCountries=[],$scope.regulationsCountries=[],$scope.capacitiesCountries=[],$scope.statisticsCountries=[],$scope.regulationCountrySelected="0",$scope.strategyCountrySelected="0",$scope.enforcementCountrySelected="0",$scope.statisticsCountrySelected="0",$scope.pCountry1=void 0!=$rootScope.defaultCountry&&$rootScope.defaultCountry.isCookie?$rootScope.defaultCountry.code:"0",$scope.selectDisabled=!1,void 0==$cookies.get("selectedCountry")&&"0"==$scope.pCountry1||(angular.element("label.country-unlock").toggleClass("country-unlock").toggleClass("country-lock"),$scope.selectDisabled=!0,angular.element("div.preferences--lock select").toggleClass("disabled")),$scope.changeCountry=function(){angular.element("label.country-lock").toggleClass("country-unlock").toggleClass("country-lock")},$scope.saveCountry=function(e){var removed=!1;void 0!=$cookies.get("selectedCountry")?($cookies.remove("selectedCountry"),removed=!0,$rootScope.defaultCountry="",$scope.pCountry1="0"):void 0!=$rootScope.defaultCountry&&""!=$rootScope.defaultCountry&&-1!=e.currentTarget.classList[0].indexOf("country-lock")&&(removed=!0,$rootScope.defaultCountry="",$scope.pCountry1="0"),$(e.currentTarget).toggleClass("country-unlock").toggleClass("country-lock"),angular.element("div.preferences--lock select").toggleClass("disabled"),$scope.selectDisabled=!$scope.selectDisabled,0==removed&&($rootScope.defaultCountry={code:$scope.pCountry1,isCookie:1,selectedByUser:!0},void 0!=$rootScope.defaultCountry2&&$rootScope.defaultCountry2.code==$scope.pCountry1&&delete $rootScope.defaultCountry2,$cookies.get("angular-consent.global")&&$cookies.put("selectedCountry",$scope.pCountry1))},$scope.ellipsis=function(pText){if(pText.length>100){var remaining=pText.substring(100);if(remaining.indexOf(" ")>-1)return pText.substring(0,100+remaining.indexOf(" "))+"..."}return pText},$scope.EUData={},dataService.getStrategiesCountries().then(function(data){data.data.resultset.map(function(elem){$stateParams.filter&&$stateParams.filter;$scope.strategiesCountries.push({country:elem[0],country_code:elem[1]})})}),dataService.getRegulationsCountries().then(function(data){data.data.resultset.map(function(elem){$stateParams.filter&&$stateParams.filter;$scope.regulationsCountries.push({country:elem[0],country_code:elem[1]})})}),dataService.getEnforcementCapacityCountries().then(function(data){data.data.resultset.map(function(elem){$stateParams.filter&&$stateParams.filter;$scope.capacitiesCountries.push({country:elem[0],country_code:elem[1]}),$scope.capacitiesCountries.sort(function(a,b){var codeA=a.country_code,codeB=b.country_code;return codeA<codeB?-1:codeA>codeB?1:0})})}),dataService.getStatisticsCountries().then(function(data){data.data.resultset.map(function(elem){$stateParams.filter&&$stateParams.filter;$scope.statisticsCountries.push({country:elem[0],country_code:elem[1]})})}),dataService.getSocialDialogueEU28Data($scope.datasetESENER).then(function(data){data.data.resultset.map(function(elem){$stateParams.filter&&$stateParams.filter;$scope.EUData={joint_consultative:elem[0],trade_union:elem[1],health_representative:elem[2],health_committee:elem[3]}})}).catch(function(err){throw err}),$scope.goTo=function(){void 0!==$state.current.name&&$state.go("regulation",{pCountry1:$scope.regulationCountrySelected,pCountry2:0,pIndicator:"secondary-legislation"})},$scope.status="ready"}return controller.$inject=["configService","dvtUtils","$scope","$stateParams","$state","$document","$log","dataService","$window","$rootScope","$cookies"],controller});