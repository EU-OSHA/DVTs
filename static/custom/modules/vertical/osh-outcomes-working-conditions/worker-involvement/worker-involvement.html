<dvt-dashboard promises="promises" parameters="dashboard.parameters" class="worker-involvement">

  <section data-ng-if="state.current.name != 'home'" id="not-home-cover" class="advice--icon--block advice--block-not-home background-main-light container-fluid section--page">
    <div class="container horizontal-nopadding">
      <div class="left-text col-md-8 col-sm-8 col-xs-12  nopadding">
        <h1 class="main-color left-text" data-ng-bind="i18nLiterals.L22015"></h1>
        <p data-ng-bind="i18nLiterals.L22060"></p>
        <span data-ng-bind="i18nLiterals.L20700"></span> <span data-ng-bind="i18nLiterals.L20704"></span> <span><a data-ng-bind="i18nLiterals.L20705" ui-sref="about-tool-detail-page({pSection: 'osh-outcomes-working-conditions', pSubsection: 'worker_involvement', pIndicator: '75'})"></a></span>
      </div>
      <div class="icon--advice workers-icon hide-mobile col-sm-4 col-md-4"></div>
    </div>
  </section>

  <section class="container section--page full-tablet">
    <div class="compare--block" id="tab1">
      <div class="line background-main-light"></div>
      <!-- country selects -->
      <form class="compare--block--form">
        <ul class="compare--list">
          <!-- 1ST COUNTRY FILTER -->
          <li>
            <label for="datafor" data-ng-bind="i18nLiterals.L20609"></label>
            <dvt-select id="datafor" data-ng-cloak ng-model="pCountry1" parameter="pCountry1" params="[['pDataset',datasetCountrySelect],['pCountry', pCountry2]]"
              listen-to="['pCountry2']" query="{{queryCountrySelect}}" cda="{{::cdaOSHOutcomes }}" placeholder="0" data-ng-change="countryChange()">
            </dvt-select>  
          </li>
          <!-- 2ND COUNTRY FILTER -->
          <li>
            <label for="comparewith" data-ng-bind="i18nLiterals.L20610"></label>
            <dvt-select id="comparewith" data-ng-cloak ng-model="pCountry2" parameter="pCountry2" params="[['pDataset',datasetCountrySelect],['pCountry', pCountry1]]"
              listen-to="['pCountry1']" query="{{queryCountrySelect}}" cda="{{::cdaOSHOutcomes }}" 
              placeholder="{{pCountry2=='0'?1:0}}" data-ng-change="countryChange()">
            </dvt-select> 
          </li>
        </ul>
      </form>
      <div class="line background-main-light"></div>
      <div class="card--grid xxs-w1 xs-w1 w1 center-text">
        <div class="card--block--chart">
          <!-- ESENER or Eurofound filter -->
          <div class="select-filter-chart">
            <select ng-model="pSplit" ng-change="changeSplit()">
              <option data-ng-bind="i18nLiterals.L20645" value="esener"></option>
              <option data-ng-bind="i18nLiterals.L20646" value="ewcs"></option>
            </select>
          </div>
          <div class="chart--block">
            <dvt-radar-chart
              data-ng-cloak
              promises="story"
              axis-fixed-max="{{axisMax}}" step="20"
              width="850" height="{{height}}"
              chart-title="{{i18nLiterals.L22015}}"
              id="1" radio="130" values-format="%"
              mesh-size="30" draw-labels="true"
              datasource-and-dates="datasourcesAndDates">>
            </dvt-radar-chart>
            <!--<button data-ng-if="pSplit == 'esener'" class="btn-default btn-main-color" data-ng-click="exportData(stories[0].promises.story1, i18nLiterals.L22015, 1)">Export data</button>
            <button data-ng-if="pSplit == 'ewcs'" class="btn-default btn-main-color" data-ng-click="exportData(stories[1].promises.story2, i18nLiterals.L22015, 2)">Export data</button>-->
        </div>
      </div>
    </div>
  </section>
  <dvt-methodology father="osh-outcomes-working-conditions" section="WORKER_INVOLVEMENT" indicatorid="75" datasetid="{{pSplit=='esener'?datasetESENER:datasetEurofound}}"></dvt-methodology>
</dvt-dashboard>